<%- include('layout/header.ejs') %> <%- include('layout/footer.ejs') %> %>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <div
            class="content align-items-center"
            style="padding-bottom: 3%">
            <% if (message) { %>
            <div
                class="alert alert-dismissable fade show alert-<%= message.type %>"
                role="alert"
                style="width: 25%">
                <button
                    class="btn-close"
                    type="button"
                    data-bs-dismiss="alert"
                    aria-label="Close"></button>
                <strong><%= message.message %></strong>
            </div>
            <% } %>
            <h1>
                <a
                    href="/staff-add"
                    type="button"
                    class="btn btn-primary btn-sm ml-3"
                    >+ Add staff</a
                >
            </h1>
            <h1>
                <a
                    href="/staff-profile-mode"
                    type="button"
                    class="btn btn-primary btn-sm ml-3"
                    >Show profile mode</a
                >
            </h1>
            <% if (data != '') { %>

            <div class="">
                <table
                    class="table table-striped table-hover text-center m-11 align-middle"
                    style="width: 100%">
                    <thead>
                        <tr
                            class="table-dark"
                            style="width: 70%">
                            <th scope="col">ID</th>
                            <th scope="col">Name</th>
                            <th scope="col">Committe</th>
                            <th scope="col">Warnings</th>
                            <th scope="col">Rate</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>

                    <tbody>
                        <% data.forEach((row , index) => { %>
                        <tr scope="row">
                            <td><%= row.id %></td>
                            <td><%= row.name %></td>
                            <td><%= row.committee %></td>
                            <td scope="row"><%= row.staffScore.warnings %></td>
                            <td scope="row"><%= row.staffScore.rate %></td>
                            <td scope="row">
                                <div class="d-flex flex-column">
                                    <a
                                        href="/view-staff/<%= row.id  %>"
                                        class="btn btn-primary btn-sm"
                                        >View</a
                                    >
                                    <a
                                        href="/edit-staff/<%= row.id  %>"
                                        class="btn btn-warning mt-1 btn-sm"
                                        >Edit</a
                                    >
                                    <a
                                        href="/delete-staff/<%=row.id%>"
                                        class="btn btn-danger mt-1 btn-sm"
                                        >Delete</a
                                    >
                                </div>
                            </td>
                        </tr>

                        <% }) %>
                    </tbody>
                </table>
            </div>

            <% } else { %>
            <div
                class="alert alert-dismissable fade show alert-info text-center"
                role="alert">
                <strong class="text-center">No staff was found</strong>
            </div>
            <% } %>
        </div>
    </body>
</html>
